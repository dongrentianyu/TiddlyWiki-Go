# TiddlyWiki Manager v2.1.0 Release Notes

## 🎯 版本信息

- **版本号**: 2.1.0
- **发布日期**: 2025-10-27
- **类型**: 功能改进与 Bug 修复

## ✨ 主要改进

### 1. 修复选择文件夹崩溃问题 ✅

**问题描述**: 新建 Wiki 时点击"选择文件夹"按钮会导致软件崩溃

**解决方案**:

- 添加了事件阻止传播处理
- 增强了错误处理机制
- 优化了 SelectFolder 对话框调用逻辑

**影响**: 用户现在可以正常使用文件夹选择功能

### 2. 端口管理独立界面 ✅

**改进前**: 使用 alert 弹窗显示端口占用信息

**改进后**:

- 独立的端口管理页面
- 清晰的占用/可用端口分类显示
- 实时刷新端口状态
- 一键关闭占用进程
- 详细的提示信息和安全警告

**新增功能**:

- 端口状态可视化
- 进程 ID 显示
- 批量查看所有 Wiki 端口
- 独立的刷新按钮

### 3. UI 简化与优化 ✅

**移除内容**:

- 删除"我的 TiddlyWiki (X)"标题
- 删除"共 X 个 Wiki"文本
- 删除筛选页面的"筛选 Wiki"标题
- 删除所有 emoji 表情

**新增内容**:

- 使用 SVG 图标替代 emoji
- 更简洁的按钮设计
- 更优雅的布局

**改进细节**:

- 端口警告简化为"X 端口占用"
- 所有按钮使用 tooltip 显示功能
- 图标统一使用 Feather Icons 风格

### 4. 多 Wiki 支持 ✅

**改进前**:

- Wiki 在 iframe 中打开
- 同时只能打开一个 Wiki
- 无法独立管理窗口

**改进后**:

- Wiki 在浏览器中打开（多标签页）
- 支持同时打开多个 Wiki
- 每个 Wiki 独立运行，互不干扰
- 移除了 WikiViewer 组件

**优势**:

- 更灵活的窗口管理
- 利用浏览器的标签页功能
- 更好的性能和稳定性
- 支持书签和历史记录

## 🐛 Bug 修复

### 1. 文件夹选择崩溃 ✅

- **问题**: 点击选择文件夹按钮导致软件关闭
- **原因**: 事件冒泡和异常处理不当
- **修复**: 添加 stopPropagation 和完善错误处理

### 2. 端口管理体验差 ✅

- **问题**: alert 弹窗难以操作
- **改进**: 专门的端口管理页面

### 3. UI 过于拥挤 ✅

- **问题**: 文本信息过多，emoji 混乱
- **改进**: 简化文本，统一图标风格

## 🔧 技术改进

### 前端改进

**新增组件**:

- `PortManager.tsx` - 端口管理页面
- `PortManager.css` - 端口管理样式

**修改组件**:

- `App.tsx` - 移除 WikiViewer，添加 Port Manager
- `CreateWikiForm.tsx` - 修复 SelectFolder 调用
- `WikiList.tsx` - 移除 onOpenWiki prop
- `WikiCard.tsx` - 直接使用 BrowserOpenURL

**UI 优化**:

- 所有按钮使用 SVG 图标
- 简化不必要的文本
- 统一图标风格

### CSS 改进

**新增样式**:

- `.control-row-full` - 全宽控制行
- `.port-manager-*` - 端口管理页面样式
- SVG 图标样式

**优化样式**:

- 按钮间距调整
- 图标对齐优化
- hover 效果统一

## 📁 文档整理

### 新的文档结构

```
TiddlyWiki-Go/
├── docs/
│   ├── v2.0.0/        # v2.0.0版本文档
│   │   ├── RELEASE_v2.0.0.md
│   │   ├── CHANGELOG_v2.0.0.md
│   │   ├── UPGRADE_TO_v2.0.0.md
│   │   ├── BUILD_v2.0.0.md
│   │   ├── IMPLEMENTATION_SUMMARY_v2.0.0.md
│   │   └── BUILD_COMPLETE_v2.0.0.md
│   └── v2.1.0/        # v2.1.0版本文档（本版本）
│       ├── RELEASE_v2.1.0.md
│       └── CHANGELOG_v2.1.0.md
├── README.md          # 项目说明（保留在根目录）
└── CHANGELOG.md       # 总更新日志（保留在根目录）
```

## 🚀 使用指南

### 端口管理

1. 点击工具栏的端口管理按钮（时钟图标）
2. 查看占用和可用的端口列表
3. 如需关闭占用进程，点击"关闭进程"按钮
4. 确认操作后即可关闭进程

### 同时使用多个 Wiki

1. 启动第一个 Wiki
2. 点击"打开"按钮（在浏览器打开）
3. 启动第二个 Wiki
4. 再次点击"打开"
5. 现在两个 Wiki 都在浏览器的不同标签页中运行

### 新建 Wiki

1. 点击"新建"按钮
2. 点击"选择"按钮选择父目录（现已修复）
3. 输入 Wiki 名称
4. 点击"创建"
5. Wiki 将自动添加到管理器

## ⚠️ 注意事项

### 浏览器打开方式

- 所有 Wiki 现在都在系统默认浏览器中打开
- 无法在应用内查看（移除了 iframe 功能）
- 建议使用现代浏览器（Chrome、Edge、Firefox）

### 端口管理

- 仅关闭明确知道的进程
- 通过软件启动的 Wiki 使用"停止"按钮而非端口管理
- 关闭系统进程前请三思

## 📊 版本对比

| 功能          | v2.0.0  | v2.1.0     |
| ------------- | ------- | ---------- |
| 选择文件夹    | ❌ 崩溃 | ✅ 正常    |
| 端口管理界面  | Alert   | 专用页面   |
| 同时打开 Wiki | 1 个    | 无限制     |
| Wiki 打开方式 | iframe  | 浏览器     |
| UI 文本       | 冗长    | 简洁       |
| 图标          | Emoji   | SVG        |
| 文档结构      | 混乱    | 按版本分类 |

## 🎊 总结

v2.1.0 是一个注重用户体验的改进版本：

- ✅ 修复了关键 Bug
- ✅ 改进了端口管理
- ✅ 简化了 UI
- ✅ 支持多 Wiki 同时使用
- ✅ 整理了文档结构

这个版本让软件更加稳定、易用和优雅。

---

**发布时间**: 2025-10-27  
**下一版本计划**: v2.2.0 - 批量操作与自定义主题
