# TiddlyWiki Manager v2.0.0 Release Notes

## 🎉 重大更新

TiddlyWiki Manager 2.0.0 是一个重大版本更新，带来了大量新功能和用户体验改进。

## ✨ 新功能

### 1. 创建 Wiki 后自动添加到管理器 ✅

- 通过软件创建的 TiddlyWiki 现在会自动添加到管理器中
- 自动检查并创建 `tiddlers` 文件夹（如果不存在）
- 无需手动再次添加，一键创建即可使用

### 2. 筛选功能全面升级 🔍

- **独立页面**：筛选从弹窗改为全屏独立页面，提供更好的操作空间
- **优化按钮**：标签和分类按钮采用紧凑设计，支持更多标签显示
- **无分类筛选**：新增"无分类"按钮，快速查找未分类的 Wiki
- **无标签筛选**：新增"无标签"按钮，快速查找未打标签的 Wiki
- **实时计数**：显示无分类和无标签的 Wiki 数量

### 3. 多样化展示模式 📊

- **按全部展示**：默认显示所有 Wiki
- **按分类展示**：根据分类筛选排序
- **按标签展示**：根据标签筛选排序
- **按路径展示**：按文件路径排序显示
- **按最近启动**：显示最近使用的 Wiki（按更新时间排序）

### 4. 视图模式切换 🎨

- **卡片视图**：传统的卡片布局，适合浏览和操作
- **列表视图**：紧凑的列表布局，一次性查看更多 Wiki
- 视图模式偏好自动保存到本地存储

### 5. 端口占用检测与管理 ⚠️

- **启动时自动扫描**：应用启动时自动检测所有 Wiki 端口的占用状态
- **可视化警告**：在标题栏显示端口占用警告，点击查看详情
- **一键关闭进程**：直接通过软件关闭占用端口的进程
- **安全提示**：关闭进程前会有确认对话框，避免误操作

### 6. Wiki 查看器窗口增强 🪟

- **三种窗口状态**：
  - 正常窗口（85% 大小）
  - 最大化窗口（全屏）
  - 最小化到任务栏
- **完整窗口控制**：
  - 最小化按钮：将窗口最小化到屏幕底部任务栏
  - 最大化/还原按钮：在最大化和正常大小间切换
  - 关闭按钮：关闭 Wiki 查看器
- **任务栏交互**：最小化后的窗口显示为悬浮任务栏，点击即可恢复

## 🛠️ 技术改进

### 后端改进

- 新增 `CheckPortsInUse` 函数检测端口占用
- 新增 `GetProcessUsingPort` 获取占用端口的进程 PID
- 新增 `KillProcessByPID` 和 `KillProcessOnPort` 关闭进程
- 改进 `CreateNewWiki` 函数，自动添加到管理器并创建 tiddlers 文件夹

### 前端改进

- 重构筛选面板为全屏页面组件
- 新增视图模式状态管理
- 新增展示模式状态管理
- 改进 WikiCard 组件支持列表和卡片两种布局
- 新增端口状态显示和管理功能
- 优化 WikiViewer 窗口控制逻辑

### UI/UX 改进

- 更紧凑的筛选按钮设计
- 更直观的视图模式切换按钮
- 更清晰的端口占用警告提示
- 更流畅的窗口状态转换动画

## 📦 更新内容

### 修改的文件

1. **Go 后端**

   - `app.go` - 添加端口管理 API，更新版本号为 2.0.0
   - `services/port_checker.go` - 扩展端口检测和进程管理功能
   - `services/process_service.go` - 改进 CreateNewWiki 函数

2. **React 前端**

   - `App.tsx` - 添加端口扫描、视图模式、展示模式功能
   - `components/FilterPanel.tsx` - 重构为全屏页面
   - `components/FilterPanel.css` - 全新的页面布局样式
   - `components/WikiViewer.tsx` - 完整的窗口控制功能
   - `components/WikiViewer.css` - 新增任务栏和窗口状态样式
   - `components/WikiList.tsx` - 支持列表和卡片视图
   - `components/WikiCard.tsx` - 支持列表模式布局
   - `components/WikiCard.css` - 列表模式样式
   - `App.css` - 新增视图切换和端口警告样式

3. **配置文件**
   - `wails.json` - 版本更新为 2.0.0

## 🚀 如何使用新功能

### 创建 Wiki

1. 点击"✨ 新建"按钮
2. 选择父目录和输入 Wiki 名称
3. 创建成功后会自动添加到管理器中
4. tiddlers 文件夹会自动创建

### 筛选 Wiki

1. 点击"🔍 筛选"按钮进入筛选页面
2. 使用搜索框搜索名称或描述
3. 点击分类按钮筛选特定分类（包括"无分类"）
4. 点击标签按钮筛选特定标签（包括"无标签"）
5. 点击"应用筛选"返回主界面

### 切换视图

1. 在工具栏找到视图模式切换按钮（▦ 和 ☰）
2. 点击卡片图标切换到卡片视图
3. 点击列表图标切换到列表视图

### 管理端口占用

1. 启动时如有端口占用会在标题栏显示警告
2. 点击警告查看占用端口详情
3. 确认后可选择关闭占用进程
4. 也可以点击"🔄 刷新"重新扫描端口

### 使用 Wiki 窗口

1. 启动 Wiki 后点击"📱 应用内"打开内置查看器
2. 使用窗口控制按钮：
   - `—` 最小化到任务栏
   - `□` 或 `❐` 最大化/还原
   - `✕` 关闭窗口
3. 点击任务栏恢复最小化的窗口

## 📝 注意事项

1. **端口管理**：关闭端口进程时请谨慎，确保不是系统关键进程
2. **性能**：列表视图可以同时显示更多 Wiki，适合管理大量 Wiki
3. **兼容性**：所有新功能向下兼容，现有配置不受影响

## 🎯 下一步计划

- [ ] 支持自定义主题配色
- [ ] 支持 Wiki 分组管理
- [ ] 支持批量操作（启动、停止等）
- [ ] 支持导入/导出配置
- [ ] 支持 Wiki 模板功能

## 👏 致谢

感谢所有用户的反馈和建议，让 TiddlyWiki Manager 变得更加好用！

---

**版本**: 2.0.0  
**发布日期**: 2025-10-27  
**作者**: TiddlyWiki Manager Team
